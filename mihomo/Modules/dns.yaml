dns:
  enable: true
  ipv6: false
  ipv6-timeout: 300 # å•ä½ï¼šmsï¼Œå†…éƒ¨åŒæ ˆå¹¶å‘æ—¶ï¼Œå‘ä¸Šæ¸¸æŸ¥è¯¢ AAAA æ—¶ï¼Œç­‰å¾… AAAA çš„æ—¶é—´ï¼Œé»˜è®¤ 100ms
  # prefer-h3: true
  listen: 0.0.0.0:5335
  use-hosts: true
  use-system-hosts: true
  respect-rules: true
  default-nameserver:
    - quic://223.5.5.5:853
    - tls://223.5.5.5
    #- system
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  # é…ç½®fake-ip-filterçš„åŒ¹é…æ¨¡å¼ï¼Œé»˜è®¤ä¸ºblacklistï¼Œå³å¦‚æœåŒ¹é…æˆåŠŸä¸è¿”å›fake-ip
  # å¯è®¾ç½®ä¸ºwhitelistï¼Œå³åªæœ‰åŒ¹é…æˆåŠŸæ‰è¿”å›fake-ip
  fake-ip-filter-mode: blacklist
  fake-ip-filter: # é…ç½®ä¸ä½¿ç”¨ fake-ip çš„åŸŸå,ä½¿ç”¨é€šé…ç¬¦æ—¶ï¼Œåº”å½“ä½¿ç”¨å¼•å· ' 'æˆ– " "å°†å†…å®¹åŒ…è£¹èµ·æ¥
    # åŸºæœ¬
    - '+.lan'
    - '+.local'
    - '*.local'
    - '*.localdomain'
    - 'time.*.com'
    - 'ntp.*.com'
    # LAN  
    - '*.example'
    - '*.invalid'
    - '*.localhost'
    - '*.test'
    - '*.home.arpa'
    # STUN
    - 'stun.*.*'
    - 'stun.*.*.*'
    - '+.stun.*.*'
    - '+.stun.*.*.*'
    - '+.stun.*.*.*.*'
    - '+.stun.*.*.*.*.*'
    # ntp
    - 'time.*.com'
    - 'time.*.gov'
    - 'time.*.edu.cn'
    - 'time.*.apple.com'
    - 'time-ios.apple.com'
    - 'time1.*.com'
    - 'time2.*.com'
    - 'time3.*.com'
    - 'time4.*.com'
    - 'time5.*.com'
    - 'time6.*.com'
    - 'time7.*.com'
    - 'ntp.*.com'
    - 'ntp1.*.com'
    - 'ntp2.*.com'
    - 'ntp3.*.com'
    - 'ntp4.*.com'
    - 'ntp5.*.com'
    - 'ntp6.*.com'
    - 'ntp7.*.com'
    - '*.time.edu.cn'
    - '*.ntp.org.cn'
    - '+.pool.ntp.org'
    - 'time1.cloud.tencent.com'
    # windows æœ¬åœ°è¿æ¥æ£€æµ‹
    - '+.msftconnecttest.com'
    - '+.msftncsi.com'
    # è‹¹æœ
    - '+.push.apple.com'
    # å°ç±³
    - '+.miwifi.com'
    - '+.market.xiaomi.com'
    - 'Mijia Cloud'
    # QQç™»å½•
    - 'localhost.ptlogin2.qq.com'
    - 'localhost.sec.qq.com'
    - '+.qq.com'
    - '+.tencent.com'
    # æ‹›å•†é“¶è¡Œ
    - '+.cmbchina.com'
    - '+.cmbimg.com'
    # docker
    - '+.docker.io'
    # Steam
    - '+.steamcontent.com'
    # Nintendo Switch
    - '+.srv.nintendo.net'
    - '*.srv.nintendo.net'
    - '*.n.n.srv.nintendo.net'
    - '+.cdn.nintendo.net'
    # Sony PlayStation
    - '+.stun.playstation.net'
    - '*.stun.playstation.net'
    # Microsoft Xbox
    - 'xbox.*.*.microsoft.com'
    - '*.*.xboxlive.com'
    - 'xbox.*.microsoft.com'
    - 'xnotify.xboxlive.com'
    # battlenet
    - '+.battlenet.com.cn'
    # è¿…é›·
    - '+.sandai.net'
    - '+.n0808.com'
    # UU
    - '+.uu.163.com'
    - 'ps.res.netease.com'
    # å‘æ—¥è‘µè¿œç¨‹æ§åˆ¶
    - '+.oray.com'
    - '+.orayimg.com'
    # å…¶ä»–
    - '+.wggames.cn'
    - 'WORKGROUP'
    # è¡¥å……
    - '+.+m2m'
    - '+.$injections.adguard.org'
    - '+.$local.adguard.org'
    - '+.+_tcp'
    - '+.+bogon'
    - '+.+_msdcs'
    - '*.turn.twilio.com'
    - '*.stun.twilio.com'
    - 'stun.syncthing.net'
    - 'stun.*'
    # fakeip-filter ä¸º rule-providers ä¸­çš„åä¸º fakeip-filter è§„åˆ™è®¢é˜…ï¼Œ
    # ä¸” behavior å¿…é¡»ä¸º domain/classicalï¼Œå½“ä¸º classical æ—¶ä»…ä¼šç”Ÿæ•ˆåŸŸåç±»è§„åˆ™
    # - rule-set:fakeip-filter
    #- 'rule-set:domestic_non_ip'
    #- 'rule-set:direct_non_ip'
    #- 'rule-set:lan_non_ip'
    # fakeip-filter ä¸º geosite ä¸­åä¸º fakeip-filter çš„åˆ†ç±»ï¼ˆéœ€è¦è‡ªè¡Œä¿è¯è¯¥åˆ†ç±»å­˜åœ¨ï¼‰
    # - geosite:fakeip-filter
    - 'geosite:cn'
    - 'geosite:connectivity-check'
    - 'geosite:private'
  nameserver-policy:
    # > ğŸ‡¨ğŸ‡³ CHN
    # CNNIC SDNS
    # ä¸­å›½æ”¿åºœç½‘
    +.gov.cn: 1.2.4.8
    # *.æ”¿åŠ¡: 1.2.4.8
    # > ğŸ‡­ğŸ‡° HKG
    # PCCW Enterprises Limited
    +.pccw.com: dns1.pccw.com
    # 1O1O
    +.1010.com.hk: dns1.pccw.com
    # csl.
    +.hkcsl.com: dns1.pccw.com
    # The CLUB by HKT
    +.theclub.com.hk: dns1.pccw.com
    # now.com
    +.now.com: dns2.pccw.com
    # Now E
    +.nowe.com: dns2.pccw.com
    # Now TV
    +.now-tv.com: dns2.pccw.com
    # MOOV
    +.moov.hk: dns3.pccw.com
    # viu
    +.viu.com: dns3.pccw.com
    # viu tv
    +.viu.tv: dns3.pccw.com
    # Hong Kong Cable Television Limited
    +.hkcable.com.hk: dns1.hkcable.com.hk
    # i-CABLE
    +.i-cable.com: dns2.hkcable.com.hk
    # CABLE TV Service
    +.cabletv.com.hk: dns2.hkcable.com.hk
    # KDDI Hong Kong Limited
    +.hk.kddi.com: apple.kdd.net.hk
    # > ğŸ‡¹ğŸ‡¼ TWN
    # ä¸­åç”µä¿¡
    +.cht.com.tw: https://dns.hinet.net/dns-query
    # ä¸­åç”µä¿¡HiNet
    +.hinet.net: https://dns.hinet.net/dns-query
    # ä¸­åç”µä¿¡emome
    +.emome.net: https://dns.hinet.net/dns-query
    # So-net Entertainment Taiwan
    # so-net.net.tw: ns1.so-net.net.tw
    # so-net.tw: ns1.so-net.net.tw
    # Taiwan Network Information Center
    +.tw: https://dns.twnic.tw/dns-query
    +.taipei: https://dns.twnic.tw/dns-query
    # > ğŸ‡ºğŸ‡¸ USA
    # Hurricane Electric
    +.he.net: https://ordns.he.net/dns-query
    # æ˜ å°„è§„åˆ™é›†
    "rule-set:alibaba":
      #- quic://dns.alidns.com:853
      - quic://223.5.5.5:853
      - quic://223.6.6.6:853
    "rule-set:tencent":
      - https://doh.pub/dns-query
    "rule-set:bilibili":
      - https://doh.pub/dns-query
    "rule-set:xiaomi":
      - https://doh.pub/dns-query 
    "rule-set:bytedance":
      - 180.184.2.2
    "rule-set:baidu":
      - 180.76.76.76
    "rule-set:qihoo360":
      - https://doh.360.cn/dns-query
    # å›½å†…
    #"geosite:cn":
      # è…¾è®¯
      #- https://doh.pub/dns-query#h3=true
      # é˜¿é‡Œ
      #- quic://223.5.5.5:853
      #- quic://223.6.6.6:853
      #- https://223.5.5.5/dns-query
      #- https://223.6.6.6/dns-query
      #- system
    "geosite:private":
      # è…¾è®¯
      #- https://doh.pub/dns-query#h3=true
      # é˜¿é‡Œ
      #- quic://223.5.5.5:853
      #- quic://223.6.6.6:853
      #- https://223.5.5.5/dns-query
      #- https://223.6.6.6/dns-query
      - system
    # å›½å¤–
    "geosite:gfw":
      - https://cloudflare-dns.com/dns-query#h3=true
      - https://dns.google/dns-query#h3=true
  nameserver:
    # Cloud Flare
    # DOH
    - https://1.1.1.1/dns-query#h3=true
    - https://1.0.0.1/dns-query#h3=true
    # DOT
    #- tls://1.1.1.1:853
    #- tls://1.0.0.1:853
    # Google
    # DOH
    - https://8.8.8.8/dns-query#h3=true
    - https://8.8.4.4/dns-query#h3=true
    # DOT
    #- tls://8.8.8.8:853
    #- tls://8.4.4.8:853
  proxy-server-nameserver:
    - quic://223.5.5.5:853
    - https://dns.alidns.com/dns-query#h3=true
    - https://doh.pub/dns-query#h3=true
    #- https://1.1.1.1/dns-query#h3=true
    #- https://8.8.8.8/dns-query#h3=true
    #- system
  direct-nameserver:
    - quic://223.5.5.5:853
    - quic://223.6.6.6:853
    #- system
  direct-nameserver-follow-policy: true # æ˜¯å¦éµå¾ªnameserver-policyï¼Œé»˜è®¤ä¸ºä¸éµå®ˆï¼Œä»…å½“direct-nameserverä¸ä¸ºç©ºæ—¶ç”Ÿæ•ˆ
  fallback:
    - https://1.1.1.1/dns-query#h3=true
    - https://1.0.0.1/dns-query#h3=true
    - https://8.8.8.8/dns-query#h3=true
    - https://8.8.4.4/dns-query#h3=true
    #- tls://8.8.4.4
    #- tls://1.1.1.1
  # åå¤‡åŸŸåè§£ææœåŠ¡å™¨ç­›é€‰ï¼Œæ»¡è¶³æ¡ä»¶çš„å°†ä½¿ç”¨ fallbackç»“æœæˆ–åªä½¿ç”¨ fallbackè§£æ
  fallback-filter:
    geoip: true
    # å¯é€‰å€¼ä¸º å›½å®¶ç¼©å†™ï¼Œé»˜è®¤å€¼ä¸º CN,é™¤äº† geoip-code é…ç½®çš„å›½å®¶ IP, å…¶ä»–çš„ IP ç»“æœä¼šè¢«è§†ä¸ºæ±¡æŸ“,geoip-code é…ç½®çš„å›½å®¶çš„ç»“æœä¼šç›´æ¥é‡‡ç”¨ï¼Œå¦åˆ™å°†é‡‡ç”¨ fallbackç»“æœ
    geoip-code: CN
    ipcidr: #ä¹¦å†™å†…å®¹ä¸º IP/æ©ç ,è¿™äº›ç½‘æ®µçš„ç»“æœä¼šè¢«è§†ä¸ºæ±¡æŸ“ï¼Œnameserver è§£æå‡ºè¿™äº›ç»“æœæ—¶å°†ä¼šé‡‡ç”¨ fallbackçš„è§£æç»“æœ
      - 240.0.0.0/4
      - 0.0.0.0/32
      - 223.75.236.241/32
      - 182.43.124.6/32
      - 106.74.25.198/32
      - 183.192.65.101/32
    domain: # è¿™äº›åŸŸåè¢«è§†ä¸ºå·²æ±¡æŸ“ï¼ŒåŒ¹é…åˆ°è¿™äº›åŸŸåï¼Œä¼šç›´æ¥ä½¿ç”¨ fallbackè§£æï¼Œä¸å»ä½¿ç”¨ nameserver
      - '+.google.com'
      - '+.youtube.com'
      - '+.twitter.com'
      - '+.x.com'
      - '+.reddit.com'
      - '+.telegram.org'
      - '+.instagram.com'
      - '+.facebook.com'
      - '+.jsdelivr.net'
      - '+.proton.me'